{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nexport const useForm = options => {\n  _s();\n  const [data, setData] = useState((options === null || options === void 0 ? void 0 : options.initialValues) || {});\n  const [errors, setErrors] = useState({});\n  const handleChange = (key, sanitizeFn) => e => {\n    const value = sanitizeFn ? sanitizeFn(e.target.value) : e.target.value;\n    setData({\n      ...data,\n      [key]: value\n    });\n  };\n  const customHandleChange = (key, sanitizeFn) => inputValue => {\n    const value = sanitizeFn ? sanitizeFn(inputValue) : inputValue;\n    setData({\n      ...data,\n      [key]: value\n    });\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const validations = options === null || options === void 0 ? void 0 : options.validations;\n    if (validations) {\n      let valid = true;\n      const newErrors = {};\n      for (const key in validations) {\n        var _validation$required;\n        const value = data[key];\n        const validation = validations[key];\n        if ((validation === null || validation === void 0 ? void 0 : (_validation$required = validation.required) === null || _validation$required === void 0 ? void 0 : _validation$required.value) && !value) {\n          var _validation$required2;\n          valid = false;\n          newErrors[key] = validation === null || validation === void 0 ? void 0 : (_validation$required2 = validation.required) === null || _validation$required2 === void 0 ? void 0 : _validation$required2.message;\n        }\n        const pattern = validation === null || validation === void 0 ? void 0 : validation.pattern;\n        if ((pattern === null || pattern === void 0 ? void 0 : pattern.value) && !RegExp(pattern.value).test(value)) {\n          valid = false;\n          newErrors[key] = pattern.message;\n        }\n        const custom = validation === null || validation === void 0 ? void 0 : validation.custom;\n        if ((custom === null || custom === void 0 ? void 0 : custom.isValid) && !custom.isValid(value)) {\n          valid = false;\n          newErrors[key] = custom.message;\n        }\n      }\n      if (!valid) {\n        setErrors(newErrors);\n        return;\n      }\n    }\n    setErrors({});\n    if (options === null || options === void 0 ? void 0 : options.onSubmit) {\n      options.onSubmit(data);\n    }\n  };\n  return {\n    setData,\n    data,\n    handleChange,\n    customHandleChange,\n    handleSubmit,\n    errors\n  };\n};\n_s(useForm, \"+5y10WyKAXXk8iRKlhan6oPJbyw=\");","map":{"version":3,"names":["useState","useForm","options","data","setData","initialValues","errors","setErrors","handleChange","key","sanitizeFn","e","value","target","customHandleChange","inputValue","handleSubmit","event","preventDefault","validations","valid","newErrors","validation","required","message","pattern","RegExp","test","custom","isValid","onSubmit"],"sources":["/home/user/Documentos/Driven/Projetos/drivent-frontend/src/hooks/useForm.js"],"sourcesContent":["import { useState } from 'react';\r\n\r\nexport const useForm = (options) => {\r\n  const [data, setData] = useState(options?.initialValues || {});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const handleChange = (key, sanitizeFn) => (e) => {\r\n    const value = sanitizeFn ? sanitizeFn(e.target.value) : e.target.value;\r\n\r\n    setData({\r\n      ...data,\r\n      [key]: value,\r\n    });\r\n  };\r\n\r\n  const customHandleChange = (key, sanitizeFn) => (inputValue) => {\r\n    const value = sanitizeFn ? sanitizeFn(inputValue) : inputValue;\r\n    setData({\r\n      ...data,\r\n      [key]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async(event) => {\r\n    event.preventDefault();\r\n    const validations = options?.validations;\r\n    if (validations) {\r\n      let valid = true;\r\n      const newErrors = {};\r\n      for (const key in validations) {\r\n        const value = data[key];\r\n        const validation = validations[key];\r\n        if (validation?.required?.value && !value) {\r\n          valid = false;\r\n          newErrors[key] = validation?.required?.message;\r\n        }\r\n\r\n        const pattern = validation?.pattern;\r\n        if (pattern?.value && !RegExp(pattern.value).test(value)) {\r\n          valid = false;\r\n          newErrors[key] = pattern.message;\r\n        }\r\n\r\n        const custom = validation?.custom;\r\n        if (custom?.isValid && !custom.isValid(value)) {\r\n          valid = false;\r\n          newErrors[key] = custom.message;\r\n        }\r\n      }\r\n\r\n      if (!valid) {\r\n        setErrors(newErrors);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setErrors({});\r\n\r\n    if (options?.onSubmit) {\r\n      options.onSubmit(data);\r\n    }\r\n  };\r\n\r\n  return {\r\n    setData,\r\n    data,\r\n    handleChange,\r\n    customHandleChange,\r\n    handleSubmit,\r\n    errors,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}